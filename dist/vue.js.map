{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 此处放所有的工具方法\n\n\nexport function isObject(obj) {\n    return typeof obj === 'object' && obj !== null\n}","import {isObject} from '../utils.js';\n\n// es6的类来实现的\nclass Observer{\n    constructor(data){\n        this.walk(data); // 可以对数据一步一步的处理\n    }\n    walk(data){\n        // 对象的循环   data:{msg:'zf',age:11}\n        Object.keys(data).forEach(key=>{\n            defineReactive(data,key,data[key]);// 定义响应式的数据变化\n        })\n    }\n}\n// vue2 的性能 递归重写get和set  proxy\nfunction defineReactive(data,key,value){\n    observe(value); // 如果传入的值还是一个对象的话 就做递归循环检测\n    Object.defineProperty(data,key,{\n        get(){\n            return value\n        },\n        set(newValue){\n            if(newValue == value) return;\n            observe(newValue); // 监控当前设置的值，有可能用户给了一个新值\n            value = newValue;\n        }\n    })\n}\n\nexport function observe(data){\n    // 对象就是使用defineProperty 来实现响应式原理\n\n    // 如果这个数据不是对象 或者是null 那就不用监控了\n    if(!isObject(data)){\n        return;\n    }\n    \n    // 对数据进行defineProperty\n    return new Observer(data); // 可以看到当前数据是否被观测过\n}","import { observe } from './observer/index.js'\nexport function initState(vm) {\n    const opts = vm.$options;\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethod(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    // computed ... watch\n}\nfunction initProps() {}\nfunction initMethod() {}\nfunction initData(vm) {\n    // 数据响应式原理\n    let data = vm.$options.data; // 用户传入的数据\n    // vm._data 就是检测后的数据了\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n    // 观测数据\n    observe(data); // 观测这个数据\n}","import {initState} from './state';\nexport function initMixin(Vue) {\n    Vue.prototype._init = function(options) {\n        // Vue的内部 $options 就是用户传递的所有参数\n\n        const vm = this;\n        vm.$options = options; // 用户传入的参数\n\n        initState(vm); // 初始化状态\n    }\n}\n\n","import {initMixin} from './init';\nfunction Vue(options){\n    // 内部要进行初始化的操作 \n    this._init(options); // 初始化操作\n}\n\ninitMixin(Vue); // 添加原型的方法\nexport default Vue;"],"names":["isObject","obj","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EAGO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;EAC1B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACH;;MCFKC;EACF,oBAAYC,IAAZ,EAAiB;EAAA;;EACb,SAAKC,IAAL,CAAUD,IAAV,EADa;EAEhB;;;;2BACIA,MAAK;EACN;EACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAE;EAC3BC,QAAAA,cAAc,CAACN,IAAD,EAAMK,GAAN,EAAUL,IAAI,CAACK,GAAD,CAAd,CAAd,CAD2B;EAE9B,OAFD;EAGH;;;;;;;EAGL,SAASC,cAAT,CAAwBN,IAAxB,EAA6BK,GAA7B,EAAiCE,KAAjC,EAAuC;EACnCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADmC;;EAEnCL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA2BK,GAA3B,EAA+B;EAC3BK,IAAAA,GAD2B,iBACtB;EACD,aAAOH,KAAP;EACH,KAH0B;EAI3BI,IAAAA,GAJ2B,eAIvBC,QAJuB,EAId;EACT,UAAGA,QAAQ,IAAIL,KAAf,EAAsB;EACtBC,MAAAA,OAAO,CAACI,QAAD,CAAP,CAFS;;EAGTL,MAAAA,KAAK,GAAGK,QAAR;EACH;EAR0B,GAA/B;EAUH;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAsB;EACzB;EAEA;EACA,MAAG,CAACH,QAAQ,CAACG,IAAD,CAAZ,EAAmB;EACf;EACH,GANwB;;;EASzB,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP,CATyB;EAU5B;;ECtCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACXmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACH,GAVyB;;EAY7B;;EAGD,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EAClB;EACA,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CAFkB;EAGlB;;EACAA,EAAAA,IAAI,GAAGc,EAAE,CAACM,KAAH,GAAW,OAAOpB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cd,IAA/D,CAJkB;;EAMlBQ,EAAAA,OAAO,CAACR,IAAD,CAAP,CANkB;EAOrB;;ECtBM,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;EAC3BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAkB;EACpC;EAEA,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CAJoC;;EAMpCb,IAAAA,SAAS,CAACC,EAAD,CAAT,CANoC;EAOvC,GAPD;EAQH;;ECTD,SAASS,GAAT,CAAaG,OAAb,EAAqB;EACjB;EACA,OAAKD,KAAL,CAAWC,OAAX,EAFiB;;EAGpB;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}